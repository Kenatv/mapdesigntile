<!DOCTYPE html>
<html>

<head>
    <title>Map Design</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js"></script>

    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        #menu {
            background:#fff;
            position:absolute;
            z-index:1;
            top:10px;
            right:10px;
            border-radius:3px;
            width:140px;
            border:1px solid rgba(0,0,0,0.4);
            font-family:'Open Sans', sans-serif;
        }
        #menu a {
            font-size:13px;
            color:#404040;
            display:block;
            margin:0;
            padding:10px;
            text-decoration:none;
            border-bottom:1px solid rgba(0,0,0,0.25);
            text-align:center;
        }
        #menu a:last-child { border:none; }
        #menu a.active { background:#3887be; color:#fff; }
        #menu a:hover { background:#f8f8f8; color:#404040; }
    </style>
</head>

<body>
    <div id="menu"></div>
    <div id='map'></div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoia2VuYXR2IiwiYSI6ImNtaGF4b2YwOTA3MnkycW9hbHMzY3R0YjEifQ.Pnh4mKoZc4eEtnDHXxD7Dg';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/dark-v11',
            center: [-122.33, 47.61],
            zoom: 12
        });

        map.on('load', () => {
            // --- SOURCES ---
            map.addSource('tileset1', { type:'raster', tiles:['assets/tileset1/{z}/{x}/{y}.png'], tileSize:256 });
            map.addSource('tileset2', { type:'raster', tiles:['assets/tileset2/{z}/{x}/{y}.png'], tileSize:256 });
            map.addSource('tileset3', { type:'raster', tiles:['assets/tileset3/{z}/{x}/{y}.png'], tileSize:256 });
            map.addSource('tileset4', { type:'raster', tiles:['assets/tileset4/{z}/{x}/{y}.png'], tileSize:256 });

            // --- LAYERS ---
            map.addLayer({
               id:'tileset1-layer',
              type:'raster', 
              source:'tileset1', 
              layout:{visibility:'none'} 
            });
            map.addLayer({
              id:'tileset2-layer', 
              type:'raster', 
              source:'tileset2', 
              layout:{visibility:'none'} 
            });
            map.addLayer({ 
              id:'tileset3-layer', 
              type:'raster', 
              source:'tileset3', 
              layout:{visibility:'none'} 
            });
            map.addLayer({ 
              id:'tileset4-layer', 
              type:'raster', 
              source:'tileset4', 
              layout:{visibility:'none'} 
            });

            // --- TOGGLE MENU ---
            const toggleableLayerIds = ['tileset1-layer','tileset2-layer','tileset3-layer','tileset4-layer'];
            const layerNames = {
                'tileset1-layer':'Tileset 1 - Basemap',
                'tileset2-layer':'Tileset 2 - Polygons',
                'tileset3-layer':'Tileset 3 - Basemap + Polygons',
                'tileset4-layer':'Tileset 4 - Creative'
            };
            

            toggleableLayerIds.forEach(id => {
                const link = document.createElement('a');
                link.id = id;
                link.href = '#';
                link.textContent = layerNames[id];
                link.className = '';

                link.onclick = function(e){
                    e.preventDefault();
                    e.stopPropagation();
                    const visibility = map.getLayoutProperty(id,'visibility');
                    if(visibility==='visible'){
                        map.setLayoutProperty(id,'visibility','none');
                        this.className='';
                    } else {
                        map.setLayoutProperty(id,'visibility','visible');
                        this.className='active';
                    }
                };
                const layers = document.getElementById('menu');
                layers.appendChild(link);
            });
        });
    </script>
</body>
</html>
